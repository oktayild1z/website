<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pınar Yıldız | Çayyolu Ankara</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet" />
<style>
:root{
  --bg:#0b1220; --bg-soft:#0f1a2d; --card:#0f1a2d; --muted:#9fb1cc; --text:#e8f0ff;
  --primary:#22c55e; --primary2:#2dd4bf; --accent:#60a5fa; --danger:#ff5a66;
  --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:linear-gradient(120deg,#08101e,#0b1220 40%,#0a1426);
  color:var(--text); line-height:1.55;
}

/* Topbar */
.topbar{
  display:flex; justify-content:space-between; align-items:center;
  padding:6px 14px; font-size:12px; color:var(--muted); border-bottom:1px solid rgba(255,255,255,.06);
}
.topbar .dt{opacity:.9}
#rates{white-space:nowrap;}

/* Header / nav */
.nav{max-width:1200px;margin:10px auto 0;display:flex;align-items:center;justify-content:space-between;padding:10px 14px 0}
.brand{display:flex;gap:10px;align-items:center}
.brand .dot{width:36px;height:36px;border-radius:50%;display:grid;place-content:center;background:linear-gradient(135deg,var(--primary2),var(--primary));font-weight:800;color:#05121d}
.brand .txt{display:flex;flex-direction:column}
.brand .txt b{font-size:14px}
.brand .txt span{font-size:12px;color:var(--muted)}
.nav nav a{color:var(--muted);margin-left:18px;text-decoration:none}
.nav nav a.btn{background:var(--primary);color:#041018;padding:8px 14px;border-radius:10px;font-weight:700}

/* HERO */
.hero-banner{
  position: relative; max-width:1200px; margin:18px auto 28px;
  border-radius:22px; overflow:hidden; aspect-ratio:21/9;
  background:#0b1428; box-shadow:var(--shadow);
}
.hero-banner img{width:100%;height:100%;object-fit:cover;filter:brightness(.9) saturate(1.08);display:block}
.hero-overlay{
  position:absolute; inset:0; display:grid; place-content:center; text-align:center; gap:10px;
  padding:0 24px; color:#e9eef7; background:linear-gradient(180deg,rgba(0,0,0,.00) 0%, rgba(0,0,0,.35) 65%);
}
.hero-overlay .headline{font-weight:800; font-size:clamp(26px,3.4vw,46px); letter-spacing:.2px}
.hero-overlay .headline b{background:linear-gradient(135deg,var(--primary2),var(--primary));-webkit-background-clip:text;background-clip:text;color:transparent}
.hero-overlay .subhead{font-size:clamp(14px,1.6vw,18px); opacity:.95}
@media (max-width:640px){ .hero-banner{border-radius:16px;margin:12px 18px 20px} }

/* Sections */
.section{max-width:1200px;margin:0 auto;padding:8px 14px 24px}
h2{margin:10px 0 14px}
.muted{color:var(--muted)}

/* Intro */
.intro-grid{display:grid;grid-template-columns:340px 1fr;gap:28px;align-items:center}
.intro-photo img{width:100%;border-radius:14px;box-shadow:var(--shadow)}
.bullets{margin:12px 0 10px;padding-left:18px}
.bullets li{margin:6px 0}
.vision{margin-top:8px;color:#cfe2ff}
.socials{display:flex;gap:14px;margin-top:10px}
.socials a{text-decoration:none;color:#cfe2ff}

/* Filters */
.filters{display:flex;gap:10px;align-items:center;margin:6px 0 8px}
.filters input,.filters select{
  background:var(--bg-soft); color:var(--text); border:1px solid rgba(255,255,255,.06);
  padding:10px 12px;border-radius:12px; outline:none; min-width:140px
}
.filters input{flex:1}

/* Cards grid */
.grid{display:grid;gap:16px}
.grid.three{grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:1100px){ .grid.three{grid-template-columns:repeat(2,minmax(0,1fr))} }
@media (max-width:680px){ .grid.three{grid-template-columns:1fr} }

/* Card */
.card{
  display:flex;flex-direction:column; border-radius:16px; overflow:hidden; text-decoration:none; color:var(--text);
  background:var(--card); border:1px solid rgba(255,255,255,.06); box-shadow:0 8px 24px rgba(2,12,26,.4);
}
.thumb{position:relative;aspect-ratio:16/9;background:#0e1729}
.thumb img{width:100%;height:100%;object-fit:cover;display:block}
.pb{padding:12px 14px 14px}
.card h3{margin:2px 0 6px}
.meta{font-size:13px;color:var(--muted)}
.price{color:#ffd1d4;font-weight:800;margin:8px 0 6px;font-size:18px}
.small{font-size:12px;color:var(--muted)}

/* Awards / Reviews */
.badges{display:flex;flex-wrap:wrap;gap:10px}
.badges span{background:var(--bg-soft);padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.06)}
.twrap{display:grid;gap:12px;grid-template-columns:repeat(3,minmax(0,1fr))}
.tcard{background:var(--bg-soft);border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:12px}
.thead{display:flex;justify-content:space-between}
.stars{color:#ffd166}
@media (max-width:960px){.twrap{grid-template-columns:1fr 1fr}}
@media (max-width:640px){.twrap{grid-template-columns:1fr}}

/* Contact */
.grid.two{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.map{width:100%;aspect-ratio:16/9;border:0;border-radius:14px}
.contact li{margin:6px 0}

/* Footer */
.footer{max-width:1200px;margin:0 auto 40px;color:var(--muted);padding:20px 14px;border-top:1px solid rgba(255,255,255,.06)}

/* Floating WhatsApp */
.fab-wa{
  position:fixed; right:18px; bottom:18px; z-index:7000; width:56px; height:56px;
  border-radius:50%; display:grid; place-content:center; background:#25d366; color:#052012;
  text-decoration:none; box-shadow:0 14px 30px rgba(0,0,0,.35); font-weight:800;
}
.fab-wa:hover{transform:translateY(-2px)}
</style>
</head>
<body>

<!-- Top bar -->
<div class="topbar">
  <div class="dt"><span id="clock">--:--</span> • <span id="date">--.--.----</span></div>
  <div id="rates">USD • EUR • GBP</div>
</div>

<!-- Header -->
<header class="nav">
  <div class="brand">
    <div class="dot">PY</div>
    <div class="txt"><b>Pınar Yıldız</b><span>Çayyolu • Ankara</span></div>
  </div>
  <nav>
    <a href="#portfoy">Portföy</a>
    <a href="#hakkinda">Hakkımda</a>
    <a href="#oduller">Ödüller</a>
    <a href="#yorumlar">Yorumlar</a>
    <a class="btn" href="#iletisim">İletişim</a>
  </nav>
</header>

<!-- HERO Banner -->
<section class="hero-banner" id="hero">
  <img src="assets/banner.jpg" alt="Çayyolu - Atakule"
       onerror="this.style.display='none';document.getElementById('hero-fallback').style.display='grid'">
  <div class="hero-overlay">
    <div class="headline">Çayyolu’nun <b>Ödüllü</b> Danışmanı</div>
    <div class="subhead"><em>Güzel hayaller, doğru adımlarla gerçeğe dönüşür.</em></div>
  </div>
  <div id="hero-fallback" class="hero-overlay" style="display:none">
    <div class="headline">Çayyolu’nun <b>Ödüllü</b> Danışmanı</div>
    <div class="subhead"><em>Güzel hayaller, doğru adımlarla gerçeğe dönüşür.</em></div>
  </div>
</section>

<!-- Intro -->
<section id="hakkinda" class="intro section">
  <div class="intro-grid">
    <div class="intro-photo"><img src="assets/award.jpg" alt="Ödül"></div>
    <div class="intro-copy">
      <h1><span class="muted">Gayrimenkul Profesyoneli</span><br><strong>Pınar YILDIZ</strong></h1>
      <ul class="bullets">
        <li>📍 RE/MAX Su 2024 Ciro & Portföy Birincisi</li>
        <li>🏆 Müşteri Memnuniyeti Ödülü Sahibi</li>
        <li>⏱ 1 günde kiralama • 48 saatte satış</li>
        <li>📊 3 yıllık tecrübe; Çayyolu bölge uzmanı</li>
        <li>🎓 Maliye mezunu</li>
      </ul>
      <p class="vision">“Evleri değil; insanların hayatına dokunan hikâyeleri satıyorum.”</p>
      <div class="socials">
        <a target="_blank" href="https://www.instagram.com/remaxsupinar">📸 Instagram</a>
        <a target="_blank" href="https://www.linkedin.com/in/p%C4%B1nar-y%C4%B1ld%C4%B1z-4ab33a333">in LinkedIn</a>
        <a target="_blank" href="https://wa.me/905387026443">💬 WhatsApp</a>
      </div>
    </div>
  </div>
</section>

<!-- Portföy -->
<section id="portfoy" class="section">
  <h2>Portföy</h2>
  <div class="filters">
    <input id="q" placeholder="Arama: başlık, semt…">
    <select id="f_status">
      <option value="">Durum</option><option>Satılık</option><option>Kiralık</option>
    </select>
    <select id="f_rooms">
      <option value="">Oda</option><option>1+1</option><option>2+1</option><option>3+1</option>
      <option>4+1</option><option>5+2</option>
    </select>
    <select id="sort">
      <option value="none">Sırala</option>
      <option value="price_desc">Fiyat (yüksek → düşük)</option>
      <option value="price_asc">Fiyat (düşük → yüksek)</option>
      <option value="m2_desc">m² (büyük → küçük)</option>
      <option value="m2_asc">m² (küçük → büyük)</option>
    </select>
  </div>

  <div id="cards" class="grid three"></div>
  <p id="empty" class="muted" style="display:none">Kriterlere uyan portföy bulunamadı.</p>
  <p id="csvErr" class="muted" style="display:none;color:#ff9aa2"></p>
</section>

<!-- Ödüller -->
<section id="oduller" class="section">
  <h2>Ödüller</h2>
  <div class="badges">
    <span>2024 Yıldızlar Kulübü</span><span>RE/MAX Su – İşlem Birincisi</span>
    <span>RE/MAX Su – Ciro Birincisi</span><span>RE/MAX Su – Portföy Birincisi</span>
    <span>RE/MAX Su – Müşteri Memnuniyeti Birincisi</span>
    <span>2025 Q1&Q2 Müşteri Memnuniyeti</span><span>2025 Q1&Q2 İşlem</span>
    <span>2025 Q1&Q2 Ciro</span><span>2025 Haziran – 3. Bölge Müşteri Memnuniyeti</span>
  </div>
</section>

<!-- Yorumlar -->
<section id="yorumlar" class="section">
  <h2>Müşteri Yorumları</h2>
  <div id="twrap" class="twrap"></div>
</section>

<!-- İletişim -->
<section id="iletisim" class="section">
  <h2>İletişim</h2>
  <div class="grid two">
    <div>
      <ul class="contact">
        <li>📍 Dodurga, Çınarcık Sk Ankarakent Sit D:2/1A, 06810 Çankaya/Ankara</li>
        <li>☎️ (0312) 236 83 83</li>
        <li>📱 <a href="tel:+905387026443" style="color:#cfe2ff">0538 702 64 43</a></li>
        <li>📧 <a href="mailto:pinary@remax-su-ank.com" style="color:#cfe2ff">pinary@remax-su-ank.com</a></li>
      </ul>
    </div>
    <iframe class="map" loading="lazy"
      src="https://www.google.com/maps?q=Dodurga,+Çınarcık+Sk+Ankarakent+Sit+D:2/1A,+06810+Çankaya/Ankara&output=embed"></iframe>
  </div>
</section>

<footer class="footer">© 2025 Pınar Yıldız • Çayyolu / Ankara</footer>

<!-- Floating WhatsApp -->
<a class="fab-wa" target="_blank"
   href="https://wa.me/905387026443?text=Merhaba%20P%C4%B1nar%20Han%C4%B1m,%20web%20sitenizden%20yaz%C4%B1yorum.">WA</a>

<script>
/* ====== Saat & Tarih ====== */
function pad(n){return n<10?'0'+n:n}
function tick(){
  const d=new Date();
  document.getElementById('clock').textContent = pad(d.getHours())+':'+pad(d.getMinutes());
  document.getElementById('date').textContent = pad(d.getDate())+'.'+pad(d.getMonth()+1)+'.'+d.getFullYear();
}
tick(); setInterval(tick, 1000);

/* ====== Kur Yükleyici (3 fallback) ====== */
async function loadRates(){
  const el=document.getElementById('rates');
  async function tryOne(url, pick){
    try{
      const r=await fetch(url,{cache:'no-store'}); if(!r.ok) throw 0;
      const j=await r.json(); const o=pick(j);
      if(o){ el.textContent=`USD ₺ ${o.usd} • EUR ₺ ${o.eur} • GBP ₺ ${o.gbp}`; return true; }
    }catch(_){ }
    return false;
  }
  if(await tryOne('https://api.exchangerate.host/latest?base=TRY&symbols=USD,EUR,GBP', j=>j?.rates?({usd:(1/j.rates.USD).toFixed(2),eur:(1/j.rates.EUR).toFixed(2),gbp:(1/j.rates.GBP).toFixed(2)}):null)) return;
  if(await tryOne('https://open.er-api.com/v6/latest/TRY', j=>j?.rates?({usd:(1/j.rates.USD).toFixed(2),eur:(1/j.rates.EUR).toFixed(2),gbp:(1/j.rates.GBP).toFixed(2)}):null)) return;
  if(await tryOne('https://api.frankfurter.app/latest?from=TRY&to=USD,EUR,GBP', j=>j?.rates?({usd:(1/j.rates.USD).toFixed(2),eur:(1/j.rates.EUR).toFixed(2),gbp:(1/j.rates.GBP).toFixed(2)}):null)) return;
  el.textContent='Kurlar yüklenemedi';
}
loadRates(); setInterval(loadRates, 300000);

/* ====== Portföy ====== */
const EL = {
  cards: document.getElementById('cards'),
  empty: document.getElementById('empty'),
  err: document.getElementById('csvErr'),
  q: document.getElementById('q'),
  st: document.getElementById('f_status'),
  rm: document.getElementById('f_rooms'),
  sort: document.getElementById('sort')
};
window._DATA=[];

/* Imgbb / BBCode / doğrudan link çözümü */
function extractImage(u){
  if(!u) return '';
  u = (''+u).trim();
  let m = u.match(/\[img\](.*?)\[\/img\]/i);
  if(m && m[1]) return m[1];
  m = u.match(/(https?:\/\/i\.ibb\.co\/[^\s\]]+\.(?:jpg|jpeg|png|webp|gif))/i);
  if(m) return m[1];
  if(/\.(jpg|jpeg|png|webp|gif)$/i.test(u)) return u;
  return '';
}
function imgOf(it){
  const url = extractImage(it.image_url);
  return url || 'assets/no-image.jpg';
}
function num(x){ if(x==null) return 0; const s=(''+x).toString().replaceAll('.','').replace(',','.'); const n=parseFloat(s); return isNaN(n)?0:n; }

/* Card HTML */
function card(x){
  const img=imgOf(x);
  const href=(x.link&&x.link.startsWith('http'))?x.link:'#';
  const m2 = x.m2 || x['m²'] || '';
  return `<a class="card" target="_blank" rel="noopener" href="${href}">
    <div class="thumb"><img src="${img}" alt="${(x.title||'')}" onerror="this.onerror=null;this.src='assets/no-image.jpg'"></div>
    <div class="pb">
      <h3>${x.title||''}</h3>
      <div class="meta">${x.district||''} • ${x.rooms||''} • ${m2?m2+' m²':''}</div>
      <div class="price">${x.price||''}</div>
      <div class="small">Detaya gitmek için karta tıklayın • WhatsApp</div>
    </div>
  </a>`;
}

/* Filtre + Sıralama + Render */
function render(data){
  const q = EL.q.value.trim().toLowerCase();
  const st = EL.st.value;
  const rm = EL.rm.value;
  const sort = EL.sort.value;

  let items = data.filter(x=>{
    const okQ = !q || (String(x.title||'').toLowerCase().includes(q) || String(x.district||'').toLowerCase().includes(q));
    const okS = !st || (x.status===st);
    const okR = !rm || (x.rooms===rm);
    return okQ && okS && okR;
  });

  // sort
  items = items.map(it=>({
    ...it,
    _price: it.price_num!=null ? Number(it.price_num) : num(it.price),
    _m2: num(it.m2 || it['m²'])
  }));
  if(sort==='price_desc') items.sort((a,b)=>b._price-a._price);
  if(sort==='price_asc')  items.sort((a,b)=>a._price-b._price);
  if(sort==='m2_desc')    items.sort((a,b)=>b._m2-a._m2);
  if(sort==='m2_asc')     items.sort((a,b)=>a._m2-b._m2);

  EL.cards.innerHTML = items.map(card).join('');
  EL.empty.style.display = items.length?'none':'block';
}

/* Data yükle */
async function loadAndRender(){
  EL.err.style.display='none';
  try{
    const res = await fetch('/.netlify/functions/portfolio', {cache:'no-store'});
    if(!res.ok) throw new Error('HTTP '+res.status);
    const data = await res.json();
    window._DATA = Array.isArray(data)?data:[];

    // normalize bazı alanlar
    window._DATA.forEach(d=>{
      if(d.price_num==null) d.price_num = num(d.price);
      if(!d.image_url) d.image_url = '';
    });

    render(window._DATA);
  }catch(err){
    EL.err.textContent = 'Portföy yüklenemedi: '+err.message+' — CSV yayın linkini kontrol edin (Dosya → Web’de yayımla → CSV).';
    EL.err.style.display='block';
  }
}
['q','f_status','f_rooms','sort'].forEach(id=>document.getElementById(id).addEventListener('input',()=>render(window._DATA||[])));
loadAndRender(); setInterval(loadAndRender, 120000);

/* ====== Yorumlar ====== */
const REVIEWS=[
  {n:'Seda K.',t:'1 günde kiralık; süreç şeffaf ve çok profesyoneldi.',s:5},
  {n:'Gökhan T.',t:'Doğru fiyat analiziyle 3 günde satış.',s:5},
  {n:'Mehmet A.',t:'Çayyolu bölgesinde rakipsiz, kesinlikle tavsiye ederim.',s:5},
  {n:'Ebru D.',t:'İlk görüşmeden tapuya kadar yanımızdaydı.',s:5},
  {n:'Nur S.',t:'Kiralama 48 saatte tamamlandı.',s:5},
  {n:'Tamer Y.',t:'İletişimi ve hızını çok beğendik.',s:5},
  {n:'Selin B.',t:'Yatırım için en doğru seçenekleri sundu.',s:4},
  {n:'Mert C.',t:'Fotoğraf ve ilan dili mükemmeldi.',s:5},
  {n:'Gizem K.',t:'Süreç boyunca her adım bilgi verildi.',s:5},
  {n:'Emre L.',t:'Bölgede ciddi portföy ağı var.',s:5},
  {n:'Damla P.',t:'Kısa sürede kaliteli kiracı bulundu.',s:5},
  {n:'Bora Z.',t:'Sonuç odaklı ve güven veriyor.',s:5}
];
function star(n){return '★★★★★'.slice(0,Math.max(0,Math.min(5,n)))}
document.getElementById('twrap').innerHTML =
  REVIEWS.map(r=>`<div class="tcard"><div class="thead"><b>${r.n}</b><span class="src">Google</span></div><div class="stars">${star(r.s)}</div><div>${r.t}</div></div>`).join('');
</script>
</body>
</html>
